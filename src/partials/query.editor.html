<query-editor-row query-ctrl="ctrl" can-collapse="true">
    <div class="gf-form-inline">
        <div class="gf-form">
            <label class="gf-form-label query-keyword width-12">Service</label>
            <div class="gf-form-select-wrapper gf-form-select-wrapper--caret-indent">
                <select class="gf-form-input service-dropdown" ng-model="ctrl.target.queryType" ng-options="f.value as f.text for f in ctrl.supported_services" ng-change="ctrl.onQueryTypeChange()"></select>
            </div>
        </div>
    </div>
    <div ng-if="ctrl.target.queryType === 'insights'">
        <div class="gf-form-inline">
            <div class="gf-form">
                <div class="gf-form gf-form--grow">
                    <label class="gf-form-label query-keyword width-12">Query</label>
                    <textarea rows="3" class="gf-form-input min-width-30" ng-model="ctrl.target.insights.nrql" spellcheck="false" placeholder="NRQL Query" ng-model-onblur ng-change="ctrl.refresh()"></textarea>
                </div>
            </div>
        </div>
        <div class="gf-form-inline">
            <div class="gf-form">
                <div class="gf-form gf-form--grow">
                    <label class="gf-form-label query-keyword width-12">Result Format</label>
                    <select class="gf-form-input service-dropdown" ng-model="ctrl.target.insights.resultFormat" ng-options="f.value as f.text for f in ctrl.supported_formats[ctrl.target.queryType]" ng-change="ctrl.refresh()"></select>
                </div>
            </div>
        </div>
    </div>
</query-editor-row>